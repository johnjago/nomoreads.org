!function(t,e,o){"use strict";function i(o){c();var i=o.data;i.left=o.pageX,i.top=o.pageY,function(o){c();var i="";i+='<div class="',i+=[d.base,d[o.direction]].join(" "),i+='">',i+='<div class="'+d.content+'">',i+=o.formatter.call(o.$el,o),i+='<span class="'+d.caret+'"></span>',i+="</div>",u={$tooltip:t(i+="</div>"),$el:o.$el},e.$body.append(u.$tooltip);var a=u.$tooltip.find(s.content),m=u.$tooltip.find(s.caret),g=o.$el.offset(),h=o.$el.outerHeight(),v=o.$el.outerWidth(),$=0,b=0,w=0,y=0,j=!1,H=!1,W=m.outerHeight(!0),L=m.outerWidth(!0),M=a.outerHeight(!0),T=a.outerWidth(!0);"right"===o.direction||"left"===o.direction?(H=(M-W)/2,y=-M/2,"right"===o.direction?w=o.margin:"left"===o.direction&&(w=-(T+o.margin))):(j=(T-L)/2,w=-T/2,"bottom"===o.direction?y=o.margin:"top"===o.direction&&(y=-(M+o.margin)));a.css({top:y,left:w}),m.css({top:H,left:j}),o.follow?o.$el.on(f.mouseMove,o,r):(o.match?"right"===o.direction||"left"===o.direction?(b=o.top,"right"===o.direction?$=g.left+v:"left"===o.direction&&($=g.left)):($=o.left,"bottom"===o.direction?b=g.top+h:"top"===o.direction&&(b=g.top)):"right"===o.direction||"left"===o.direction?(b=g.top+h/2,"right"===o.direction?$=g.left+v:"left"===o.direction&&($=g.left)):($=g.left+v/2,"bottom"===o.direction?b=g.top+h:"top"===o.direction&&(b=g.top)),l($,b));o.timer=p.startTimer(o.timer,o.delay,function(){u.$tooltip.addClass(d.visible)}),o.$el.one(f.mouseLeave,o,n)}(i)}function n(t){var e=t.data;p.clearTimer(e.timer),c()}function r(t){l(t.pageX,t.pageY)}function l(t,e){u&&u.$tooltip.css({left:t,top:e})}function c(){u&&(u.$el.off([f.mouseMove,f.mouseLeave].join(" ")),u.$tooltip.remove(),u=null)}var a=e.Plugin("tooltip",{widget:!0,defaults:{delay:0,direction:"top",follow:!1,formatter:function(t){return this.data("title")},margin:15,match:!1},classes:["content","caret","visible","top","bottom","right","left"],methods:{_construct:function(t){this.on(f.mouseEnter,t,i)},_destruct:function(t){c(),this.off(f.namespace)}}}),s=a.classes,d=s.raw,f=a.events,p=a.functions,u=null}(jQuery,Formstone);